@import 'tailwindcss';
@import './tokens.css';
@import './typography.css';
@import './projects.css';
@import './hero.css';
@import './projectindex.css';

@layer base {
  body {
    background-color: hsl(var(--bg));
    color: hsl(var(--fg));
    font-family: var(--font-sans);
  }
}

@layer components {
  .nav-link {
    @apply font-mono text-xs tracking-wider uppercase;
  }

  .hero-grid {
    @apply mx-auto grid min-h-[100vh] max-w-[1920px] grid-cols-4 md:grid-cols-12;
  }
}

@layer utilities {
  .fill-offset {
    min-height: calc(100vh - var(--nav-h) - var(--footer-h));
  }

  /* Grid system for content */
  .grid-12 {
    @apply grid grid-cols-4 gap-x-[clamp(1rem,2vw,2rem)] md:grid-cols-12;
  }

  /* Controls horiztonal padding for content*/
  .inner {
    @apply mx-auto w-full px-5 md:px-6 lg:px-8;
  }

  .scramble-width {
    width: clamp(30ch, 20vw, 60ch);
  }

  .neon {
    color: hsl(var(--accent));
    text-shadow:
      0 0 0.02em hsl(var(--accent)),
      0 0 0.08em hsl(var(--accent)),
      0 0 0.18em hsl(var(--accent)),
      0 0 0.38em hsl(var(--accent)),
      0 0 0.8em hsl(var(--accent-2));
    filter: drop-shadow(0 0 0.45rem hsl(var(--accent) / 0.3));
  }

  @keyframes neon-flicker {
    0% {
      opacity: 0;
      text-shadow: none;
    }
    6% {
      opacity: 0.35;
    }
    9% {
      opacity: 1;
    }
    11% {
      opacity: 0.2;
    }
    14% {
      opacity: 1;
    }
    22% {
      opacity: 0.75;
    }
    28% {
      opacity: 1;
    }
    33% {
      opacity: 0.6;
    }
    38% {
      opacity: 1;
    }
    100% {
      opacity: 1;
    }
  }
  .flicker-on {
    animation: neon-flicker 1.1s cubic-bezier(0.22, 0.61, 0.36, 1) both;
  }

  @media (prefers-reduced-motion: reduce) {
    .flicker-on {
      animation: none;
    }
  }

  /* Mobile viewport stability fixes */
  @media (max-width: 768px) {
    .mobile-stable-height {
      height: 100vh;
      height: 100dvh; /* Use dynamic viewport height on mobile when supported */
    }

    /* Prevent jumping on mobile by using stable viewport units */
    .parallax-container {
      height: 60vh;
      height: 60dvh; /* Fallback to dynamic viewport height */
      overflow: hidden; /* Prevent scaling from causing layout shifts */
    }

    .parallax-container img {
      transform-origin: center center;
      will-change: transform;
      backface-visibility: hidden; /* Improve performance */
      -webkit-backface-visibility: hidden;
    }

    /* Ensure smooth scrolling on mobile */
    html {
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }

    /* Prevent layout shifts during scroll */
    body {
      overflow-x: hidden;
    }
  }
}
